/*!
 * vimeo.ga.js | v0.4
 * Copyright (c) 2014 Sander Heilbron (http://www.sanderheilbron.nl)
 * MIT licensed
 */

(function(e){"use strict";function g(e){switch(u){case"gtm":dataLayer.push({event:"Vimeo",eventCategory:"Vimeo",eventAction:e,eventLabel:n,eventValue:undefined,eventNonInteraction:true});break;case"ua":ga("send","event","Vimeo",e,n,undefined,{nonInteraction:1});break;case"ga":_gaq.push(["_trackEvent","Vimeo",e,n,undefined,true]);break}}function y(e){if(e.origin.replace("https:","http:")!=="http://player.vimeo.com"||typeof u==="undefined"){return}var t=JSON.parse(e.data);switch(t.event){case"ready":w();break;case"playProgress":S(t.data);break;case"seek":if(s&&!d){g("Skipped video forward or backward");d=true;o.text("Skipped video forward or backward")}break;case"play":if(!c){g("Started video");c=true;o.text("Started video")}else if(!p&&h){g("Resumed video");p=true;o.text("Resumed video")}break;case"pause":E();break;case"finish":if(!v){g("Completed video");v=true;o.text("Completed video")}break}}function b(e,r){var i={method:e};if(r){i.value=r}t[0].contentWindow.postMessage(JSON.stringify(i),n)}function w(){b("addEventListener","play");b("addEventListener","seek");b("addEventListener","pause");b("addEventListener","finish");b("addEventListener","playProgress");o.text("Ready to track events")}function E(){if(m<99&&!h){g("Paused video");h=true;o.text("Paused video")}}function S(e){m=Math.round(e.percent*100);if(!i){return}var t;if(m>24&&!a){t="Played video: 25%";a=true}if(m>49&&!f){t="Played video: 50%";f=true}if(m>74&&!l){t="Played video: 75%";l=true}if(t){g(t);o.text(t)}}if(!e("#vimeo-player").length){return}var t=e("#vimeo-player"),n=t.attr("src").split("?")[0],r=document.URL.split(":")[0],i=t.data("progress"),s=t.data("seek"),o=e(".video-status"),u,a=false,f=false,l=false,c=false,h=false,p=false,d=false,v=false,m=0;if(n.match(/^http/)===null){n=r+":"+n}if(typeof ga==="function"){u="ua"}if(typeof _gaq!=="undefined"&&typeof _gaq.push==="function"){u="ga"}if(typeof dataLayer!=="undefined"&&typeof dataLayer.push==="function"){u="gtm"}if(window.addEventListener){window.addEventListener("message",y,false)}else{window.attachEvent("onmessage",y,false)}})(jQuery)